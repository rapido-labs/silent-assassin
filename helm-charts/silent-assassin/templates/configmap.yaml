apiVersion: v1
data:
  application.yaml: |
    SERVER_LISTEN_HOST: 0.0.0.0
    SERVER_HOST: http://{{ .Release.Name }}.{{ .Release.Namespace }}.svc.cluster.local
    SERVER_PORT: 8080
    LABEL_SELECTORS: {{ .Values.silent_assassin.node_selectors }}

    SPOTTER:
      POLL_INTERVAL: {{ .Values.silent_assassin.spotter.poll_interval }}
      WHITE_LIST_INTERVAL_HOURS: {{ .Values.silent_assassin.spotter.white_list_interval_hours }}

    KILLER:
      POLL_INTERVAL: {{ .Values.silent_assassin.killer.poll_interval }}
      DRAINING_TIMEOUT_WHEN_NODE_EXPIRED: {{ .Values.silent_assassin.killer.draining_timeout_when_node_expired }}
      DRAINING_TIMEOUT_WHEN_NODE_PREEMPTED: {{ .Values.silent_assassin.killer.draining_timeout_when_node_preempted }}
      EVICT_DELETE_DEADLINE: {{ .Values.silent_assassin.killer.evict_delete_deadline }}
      GRACE_PERIOD_SECONDS_WHEN_POD_DELETED: {{ .Values.silent_assassin.killer.grace_period_seconds_when_pod_deleted }}

    SHIFTER:
      ENABLED: {{ .Values.silent_assassin.shifter.enabled }}
      POLL_INTERVAL: {{ .Values.silent_assassin.shifter.poll_interval }}
      WHITE_LIST_INTERVAL_HOURS: {{ .Values.silent_assassin.shifter.white_list_interval_hours }}
      NP_RESIZE_TIMEOUT: {{ .Values.silent_assassin.shifter.np_resize_timeout }}
      SLEEP_AFTER_NODE_DELETION: {{ .Values.silent_assassin.shifter.sleep_after_node_deletion }}

    LOGGER:
      LEVEL:{{ .Values.silent_assassin.logger_level }}

    KUBERNETES:
      RUN_MODE: {{ .Values.silent_assassin.k8s_run_mode }}

    SLACK:
      WEBHOOK_URL:  {{ .Values.silent_assassin.slack.webhook_url }}
      USERNAME: {{ .Values.silent_assassin.slack.username }}
      CHANNEL: {{ .Values.silent_assassin.slack.channel }}
      SLACK_ICON_URL: {{ .Values.silent_assassin.slack.icon_url }}

    CLIENT:
      SERVER_RETRIES: {{ .Values.silent_assassin.client.server_retries }}
      WATCH_MAINTAINANCE_EVENTS: {{ .Values.silent_assassin.client.watch_maintainance_event }}
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-config
  labels:
    team: {{ .Values.team }}